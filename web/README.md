# ESP Web Tools Installation Guide

This directory contains the ESP Web Tools installer for FluidTouch, allowing users to flash firmware directly from their browser.

## How It Works

1. **User visits:** https://jeyeager65.github.io/FluidTouch/
2. **Clicks "Install FluidTouch"** button
3. **Browser prompts** for serial port access
4. **Firmware flashes** automatically to ESP32-S3

## Files

- `index.html` - Web installer UI
- `manifest.json` - ESP Web Tools manifest defining firmware parts
- `firmware/` - Binary files (generated by GitHub Actions)
  - `bootloader.bin` - ESP32-S3 bootloader
  - `partitions.bin` - Partition table
  - `boot_app0.bin` - Boot application selector
  - `firmware.bin` - Main FluidTouch application

## GitHub Pages Setup

### One-Time Configuration

1. **Enable GitHub Pages:**
   - Go to repository Settings â†’ Pages
   - Source: "GitHub Actions"
   - Branch: (automatic via workflow)

2. **Create a Release Tag:**
   ```bash
   git tag -a v1.0.0 -m "Release version 1.0.0"
   git push origin v1.0.0
   ```

3. **GitHub Actions will:**
   - Build firmware with PlatformIO
   - Extract bootloader and partition files
   - Upload firmware artifacts
   - Create GitHub Release with download links
   - Deploy web installer to GitHub Pages

### Updating Firmware

Just create a new tag:
```bash
git tag -a v1.0.1 -m "Release version 1.0.1"
git push origin v1.0.1
```

The workflow automatically:
- Builds new firmware
- Updates manifest.json with new version
- Deploys to GitHub Pages
- Creates release with binaries

## Browser Requirements

ESP Web Tools requires:
- **Chrome** 89+
- **Edge** 89+
- **Opera** 75+

(Web Serial API support required)

## Local Testing

To test the web installer locally:

```bash
cd web
python -m http.server 8000
```

Visit: http://localhost:8000

**Note:** You'll need to manually copy firmware files to `web/firmware/` for local testing:
```bash
mkdir -p web/firmware
cp .pio/build/elecrow-crowpanel-7-basic/*.bin web/firmware/
```

## Customization

### Updating Version Display

Edit `index.html`:
```html
<p class="version">Version: 0.9.1</p>
```

### Adding New Features

Edit the features list in `index.html`:
```html
<li><strong>New Feature</strong> - Description</li>
```

### Changing Branding

Update colors in the `<style>` section of `index.html`.

## Troubleshooting

### "Firmware files not found"
- Ensure GitHub Actions completed successfully
- Check that `web/firmware/` contains all 4 .bin files
- Verify manifest.json paths match actual files

### "Browser not supported"
- User needs Chrome, Edge, or Opera
- Web Serial API must be enabled
- HTTPS required (GitHub Pages provides this)

### "Serial port access denied"
- User must grant permission when browser prompts
- Some corporate/school networks block Web Serial
- Try different USB port or cable

## Manual Flash Alternative

Users who can't use ESP Web Tools can:

1. Download `firmware.bin` from Releases
2. Use [ESP Web Flasher](https://esp.huhn.me/)
3. Or esptool.py:
   ```bash
   esptool.py --chip esp32s3 --port COM6 write_flash 0x10000 firmware.bin
   ```
